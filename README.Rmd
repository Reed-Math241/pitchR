---
output: github_document
editor_options: 
  chunk_output_type: console
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "75%",
  warning = FALSE,
  message = FALSE,
  fig.retina = 2,
  fig.align = 'center'
)
library(tidyverse)
library(pitchR)
```


# pitchR  <img src= "https://github.com/Reed-Math241/pkgGrpq/blob/master/figs/IMG_0175.png" align="right" width=175 />


<!-- badges: start -->
<!-- badges: end -->


The goal of `pitchR` is to provide an accessible dataset with advanced pitching statistics and salary data for individual pitchers. This dataset contains data from the 2018, 2019, and 2020 seasons.

One exciting feature of the package is the inclusion of expected statistics!

```{r pitcher_woba-1, echo=FALSE, warning=FALSE, fig.width=14, fig.height=8}
pitcher <- pitchR %>%
  group_by(name) %>%
  summarize(
    ba = mean(ba),
    xba = mean(xba),
    salary = mean(salary)
    )

ggplot(data = pitcher, aes(x = ba, y = xba)) +
  geom_point(aes(color = salary), size = 1.5) +
  geom_abline(slope = 1, intercept = 0, alpha = 0.5) +
  scale_color_gradient(low = "cornsilk2", high = "turquoise4") +
  labs(
    title = "Batting Average vs Expected Batting Average by Pitcher",
    subtitle = "Batting Average: hits/# of at bats, expected values are derived by
comparing the exit velocity and launch angle of batted balls against historical outcomes",
    x = "Batting Average",
    y = "Expected Batting Average"
    ) +
  theme_minimal() +
  theme(
    plot.title.position = "plot",
    plot.subtitle = element_text(margin = margin(10, 0, 20, 0))
    )

```

## Installation

The development version of pitchR is available from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("Reed-Math241/pkgDemo")
```

## About the Data

Data were collected and made available by [Spotrac](https://www.spotrac.com/mlb/payroll/) and the [Savant](https://baseballsavant.mlb.com/statcast_search). The full scraping and cleaning process is documented [here](https://github.com/Reed-Math241/pkgGrpq/blob/master/data-raw/DATASET.R).

The `pitchR` package contains one dataset, with data on Pitchers from the 2018-2020 Seasons. 

```{r showdata}
library(pitchR)
data('pitchR')
``` 

Here is a simplified version of the raw data; see `?pitchR` for more info: 

```{r example-pitchR}
head(pitchR)
```

## Examples

Pitchers are fun to summarize! For example:

```{r example, warning=FALSE, message=FALSE}
library(tidyverse)

pitchR %>% 
  count(year)

pitchR %>% 
  group_by(year) %>% 
  summarize(across(where(is.numeric), mean, na.rm = T))
```

Pitchers are fun to visualize! For example:

```{r pitcher_velocity-1, echo=FALSE}

ggplot(data = pitchR, aes(x = velocity, y = spin_rate)) +
  geom_point(
    aes(color = whiffs),
    alpha = 0.4
    ) +
  theme_minimal() +
  scale_color_distiller(direction = -1, palette = "YlGn") +
  labs(
    title = "Velocity, Spin Rate, and Whiffs",
    subtitle = "Whiffs: Total Number of times a batter swung and whiffed on the player's pitch",
    x = "Velocity (MPH)",
    y = "Spin Rate (Revolutions per Min.)"
    ) +
  theme(
    legend.background = element_rect(fill = "white", color = NA),
    plot.title.position = "plot",
    plot.caption = element_text(hjust = 0, face= "italic"),
    plot.caption.position = "plot"
    )

```









